"use strict";(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[208],{30208:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var r=t(74165),i=t(15861),o=t(29439),l=t(65964),a=t(73709),s=t(47313),u=t(58467),c=t(2135),d=t(47825),v=t(69099),f=t(73428),h=t(82294),g=t(65280),x=t(19536),m=t(51629),j=t(61689),p=t(47131),Z=t(66835),w=t(57861),S=t(48175),A=t(23116),C=t(53261),R=t(58772),y=t(38875),b=t(50152),D=t(21570),k=t(24076),P=t(67478),F=t(63585),T=t(61113),_=t(51405),q=t(22608),N=t(86028),E=t(46417);function I(e){var n=e.row,t=e.selected,r=e.onEditRow,i=(e.onSelectRow,e.onDeleteRow),l=n.image,a=n.name,u=n.trending,c="https://aqarbackend.revampbrands.com/storage/".concat(l),d=(0,s.useState)(!1),f=(0,o.Z)(d,2),h=f[0],g=f[1],x=(0,s.useState)(null),m=(0,o.Z)(x,2),j=m[0],Z=m[1],w=function(){Z(null)};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(k.Z,{hover:!0,selected:t,children:[(0,E.jsx)(P.Z,{children:(0,E.jsxs)(N.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,E.jsx)(F.Z,{alt:a.en,src:c}),(0,E.jsx)(T.Z,{variant:"subtitle2",noWrap:!0,children:a.en})]})}),(0,E.jsx)(P.Z,{align:"left",sx:{textTransform:"capitalize"},children:a.ar}),(0,E.jsx)(P.Z,{align:"center",sx:{textTransform:"capitalize"},children:1===u?(0,E.jsx)(F.Z,{alt:a.en,src:"/assets/done.svg"}):(0,E.jsx)(F.Z,{alt:a.en,src:"/assets/unDone.svg"})}),(0,E.jsx)(P.Z,{align:"right",children:(0,E.jsx)(p.Z,{color:j?"inherit":"default",onClick:function(e){Z(e.currentTarget)},children:(0,E.jsx)(A.Z,{icon:"eva:more-vertical-fill"})})})]}),(0,E.jsxs)(q.Z,{open:j,onClose:w,arrow:"right-top",sx:{width:140},children:[(0,E.jsxs)(_.Z,{onClick:function(){g(!0),w()},sx:{color:"error.main"},children:[(0,E.jsx)(A.Z,{icon:"eva:trash-2-outline"}),"Delete"]}),(0,E.jsxs)(_.Z,{onClick:function(){r(),w()},children:[(0,E.jsx)(A.Z,{icon:"eva:edit-fill"}),"Edit"]})]}),(0,E.jsx)(R.Z,{open:h,onClose:function(){g(!1)},title:"Delete",content:"Are you sure want to delete?",action:(0,E.jsx)(v.Z,{variant:"contained",color:"error",onClick:i,children:"Delete"})})]})}var L=t(35898),B=t(68687),M=t(41727);function W(e){e.isFiltered;var n=e.filterName,t=(e.filterRole,e.optionsRole,e.onFilterName);e.onFilterRole,e.onResetFilter;return(0,E.jsx)(L.Z,{spacing:2,alignItems:"center",direction:{xs:"column",sm:"row"},sx:{px:2.5,py:3},children:(0,E.jsx)(B.Z,{fullWidth:!0,value:n,onChange:t,placeholder:"Search...",InputProps:{startAdornment:(0,E.jsx)(M.Z,{position:"start",children:(0,E.jsx)(A.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})}var G=t(12078),Q=t(58908),z=[],O=["all","true","false"],K=[{id:"English",label:"English",align:"left"},{id:"Arabic",label:"Arabic",align:"left"},{id:"trending",label:"Trending",align:"left"},{id:""}];function U(){var e,n,t,k=(0,D.x6)(),P=k.dense,F=k.page,T=k.order,_=k.orderBy,q=k.rowsPerPage,N=k.setPage,L=k.selected,B=k.setSelected,M=k.onSelectRow,U=k.onSelectAllRows,$=k.onSort,H=k.onChangeDense,J=k.onChangePage,V=k.onChangeRowsPerPage,X=(0,b.K$)().themeStretch,Y=(0,Q.Ds)().enqueueSnackbar,ee=(0,u.s0)(),ne=(0,G.NG)(),te=ne.data,re=ne.isLoading,ie=ne.refetch,oe=(0,s.useState)([]),le=(0,o.Z)(oe,2),ae=le[0],se=le[1];console.log(null===te||void 0===te||null===(e=te.data)||void 0===e?void 0:e.per_page),(0,s.useEffect)((function(){var e;te&&!re&&se(null===te||void 0===te||null===(e=te.data)||void 0===e?void 0:e.data)}),[te,ae,re]);var ue=(0,s.useState)(!1),ce=(0,o.Z)(ue,2),de=ce[0],ve=ce[1],fe=(0,s.useState)(""),he=(0,o.Z)(fe,2),ge=he[0],xe=he[1],me=(0,s.useState)("all"),je=(0,o.Z)(me,2),pe=je[0],Ze=je[1],we=(0,s.useState)("all"),Se=(0,o.Z)(we,2),Ae=Se[0],Ce=Se[1],Re=function(e){var n,t=e.inputData,r=e.comparator,i=e.filterName,o=e.filterStatus,l=e.filterRole,a=t.map((function(e,n){return[e,n]}));a.sort((function(e,n){var t=r(e[0],n[0]);return 0!==t?t:e[1]-n[1]})),t=null===a||void 0===a?void 0:a.map((function(e){return e[0]})),i&&(t=null===(n=t)||void 0===n?void 0:n.filter((function(e){return-1!==e.name.ar.toLowerCase().indexOf(i.toLowerCase())})));"all"!==o&&(t=t.filter((function(e){return e.active===o})));"all"!==l&&(t=t.filter((function(e){return e.role===l})));return t}({inputData:ae,comparator:(0,D.sQ)(T,_),filterName:ge,filterRole:pe,filterStatus:Ae}),ye=null===Re||void 0===Re?void 0:Re.slice(F*q,F*q+q),be=P?52:72,De=""!==ge||"all"!==pe||"all"!==Ae,ke=!(null!==Re&&void 0!==Re&&Re.length)&&!!ge||!(null!==Re&&void 0!==Re&&Re.length)&&!!pe||!(null!==Re&&void 0!==Re&&Re.length)&&!!Ae,Pe=function(){ve(!1),console.log("test")},Fe=(0,G.Ic)(),Te=(0,o.Z)(Fe,1)[0],_e=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(n);case 2:(t=e.sent)&&t.error?(console.error("An error occurred while deleting area:",t.error),i=t.error.data.message||"An error occurred",Y(i,{variant:"error"}),Pe(),ve(!1)):(console.log("Area deleted successfully"),o=null===ae||void 0===ae?void 0:ae.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==n})),B([]),se(o),ie(),Pe(),ve(!1),F>0&&ye.length<2&&N(F-1));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(l.ql,{children:(0,E.jsx)("title",{children:" Areas: List"})}),(0,E.jsxs)(d.Z,{maxWidth:!X&&"lg",children:[(0,E.jsx)(y.Z,{heading:"Areas List",links:[{name:"Dashboard",href:S.vB.root},{name:"Area",href:S.vB.areas.root},{name:"List"}],action:(0,E.jsx)(v.Z,{component:c.rU,to:S.vB.areas.new,variant:"contained",startIcon:(0,E.jsx)(A.Z,{icon:"eva:plus-fill"}),children:"New Areas"})}),(0,E.jsxs)(f.Z,{children:[(0,E.jsx)(h.Z,{value:Ae,onChange:function(e,n){N(0),Ce(n)},sx:{px:2,bgcolor:"background.neutral"},children:z.map((function(e){return(0,E.jsx)(g.Z,{label:e,value:e},e)}))}),(0,E.jsx)(x.Z,{}),(0,E.jsx)(W,{isFiltered:De,filterName:ge,filterRole:pe,optionsRole:O,onFilterName:function(e){N(0),xe(e.target.value)},onFilterRole:function(e){N(0),Ze(e.target.value)},onResetFilter:function(){xe(""),Ze("all"),Ce("all")}}),(0,E.jsxs)(m.Z,{sx:{position:"relative",overflow:"unset"},children:[(0,E.jsx)(D.Z4,{dense:P,numSelected:null===L||void 0===L?void 0:L.length,rowCount:null===ae||void 0===ae?void 0:ae.length,onSelectAllRows:function(e){return U(e,null===ae||void 0===ae?void 0:ae.map((function(e){return e.id})))},action:(0,E.jsx)(j.Z,{title:"Delete",children:(0,E.jsx)(p.Z,{color:"primary",onClick:function(){ve(!0)},children:(0,E.jsx)(A.Z,{icon:"eva:trash-2-outline"})})})}),(0,E.jsx)(C.Z,{children:(0,E.jsxs)(Z.Z,{size:P?"small":"medium",sx:{minWidth:800},children:[(0,E.jsx)(D.K,{order:T,orderBy:_,headLabel:K,rowCount:null===ae||void 0===ae?void 0:ae.length,numSelected:null===L||void 0===L?void 0:L.length,onSort:$,onSelectAllRows:function(e){return U(e,null===ae||void 0===ae?void 0:ae.map((function(e){return e.id})))}}),(0,E.jsxs)(w.Z,{children:[null===Re||void 0===Re||null===(n=Re.slice(F*q,F*q+q))||void 0===n?void 0:n.map((function(e){return(0,E.jsx)(I,{row:e,selected:L.includes(e.id),onSelectRow:function(){return M(null===e||void 0===e?void 0:e.id)},onDeleteRow:function(){return _e(null===e||void 0===e?void 0:e.id)},onEditRow:function(){return n=null===e||void 0===e?void 0:e.id,n=String(n),void ee(S.vB.areas.edit((0,a.o)(n)));var n}},null===e||void 0===e?void 0:e.id)})),(0,E.jsx)(D.$W,{height:be,emptyRows:(0,D.fQ)(F,q,null===ae||void 0===ae?void 0:ae.length)}),(0,E.jsx)(D.et,{isNotFound:ke})]})]})})]}),(0,E.jsx)(D.S_,{count:null===te||void 0===te||null===(t=te.data)||void 0===t?void 0:t.per_page,page:F,rowsPerPage:q,onPageChange:J,onRowsPerPageChange:V,dense:P,onChangeDense:H})]})]}),(0,E.jsx)(R.Z,{open:de,onClose:Pe,title:"Delete",content:(0,E.jsxs)(E.Fragment,{children:["Are you sure want to delete"," ",(0,E.jsxs)("strong",{children:[" ",null===L||void 0===L?void 0:L.length," "]})," items?"]}),action:(0,E.jsx)(v.Z,{variant:"contained",color:"error",onClick:function(){!function(e){var n=ae.filter((function(n){return!e.includes(n.id)}));if(B([]),se(n),F>0)if(e.length===ye.length)N(F-1);else if((null===e||void 0===e?void 0:e.length)===Re.length)N(0);else if((null===e||void 0===e?void 0:e.length)>ye.length){var t=Math.ceil(((null===ae||void 0===ae?void 0:ae.length)-e.length)/q)-1;N(t)}}(L),Pe()},children:"Delete"})})]})}},12078:function(e,n,t){t.d(n,{Ic:function(){return s},MH:function(){return l},NG:function(){return i},Td:function(){return a},gZ:function(){return o}});var r=t(48526).hi.injectEndpoints({reducerPath:"apiUser",endpoints:function(e){return{getAreas:e.query({query:function(){return"/areas"},providesTags:["areas"]}),getAreasId:e.query({query:function(e){return"/areas/".concat(e,"?local=none")},providesTags:["areas"]}),addAreas:e.mutation({query:function(e){return{url:"/areas",method:"POST",body:e}},invalidatesTags:["areas"]}),editAreas:e.mutation({query:function(e){var n=e.formData,t=e.id;return{url:"/areas/".concat(t),method:"POST",body:n}},invalidatesTags:["areas"]}),deleteAreas:e.mutation({query:function(n){return{url:"/areas/".concat(n),method:"Delete",body:e}},invalidatesTags:["areas"]})}}}),i=r.useGetAreasQuery,o=r.useGetAreasIdQuery,l=r.useAddAreasMutation,a=r.useEditAreasMutation,s=r.useDeleteAreasMutation}}]);