"use strict";(self.webpackChunkadmin_plus=self.webpackChunkadmin_plus||[]).push([[5400],{78084:(e,t,n)=>{n.d(t,{A:()=>c});var l=n(63464),s=n(40033),i=n(28170),a=n(79739),o=n(45098),r=n(44414);function c(e){let{title:t,content:n,action:c,open:d,onClose:u,...h}=e;return(0,r.jsxs)(l.A,{fullWidth:!0,maxWidth:"xs",open:d,onClose:u,...h,children:[(0,r.jsx)(s.A,{sx:{pb:2},children:t}),n&&(0,r.jsxs)(i.A,{sx:{typography:"body2"},children:[" ",n," "]}),(0,r.jsxs)(a.A,{children:[c,(0,r.jsx)(o.A,{variant:"outlined",color:"inherit",onClick:u,children:"Cancel"})]})]})}},87033:(e,t,n)=>{n.d(t,{A:()=>u});var l=n(53011),s=n(12257),i=n(82053),a=n(52432),o=n(36080),r=n(42074),c=n(44414);function d(e){let{link:t,activeLast:n,disabled:s}=e;const{name:i,href:a,icon:d}=t,u={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...s&&!n&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},h=(0,c.jsxs)(c.Fragment,{children:[d&&(0,c.jsx)(l.A,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:d}),i]});return a?(0,c.jsx)(o.A,{component:r.N_,to:a,sx:u,children:h}):(0,c.jsxs)(l.A,{sx:u,children:[" ",h," "]})}function u(e){let{links:t,action:n,heading:r,moreLink:u,activeLast:x,sx:g,...p}=e;const m=t[t.length-1].name;return(0,c.jsxs)(l.A,{sx:{mb:5,...g},children:[(0,c.jsxs)(s.A,{direction:"row",alignItems:"center",children:[(0,c.jsxs)(l.A,{sx:{flexGrow:1},children:[r&&(0,c.jsx)(i.A,{variant:"h4",gutterBottom:!0,children:r}),!!t.length&&(0,c.jsx)(a.A,{separator:(0,c.jsx)(h,{}),...p,children:t.map((e=>(0,c.jsx)(d,{link:e,activeLast:x,disabled:e.name===m},e.name||"")))})]}),n&&(0,c.jsxs)(l.A,{sx:{flexShrink:0},children:[" ",n," "]})]}),!!u&&(0,c.jsx)(l.A,{sx:{mt:2},children:u.map((e=>(0,c.jsx)(o.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}function h(){return(0,c.jsx)(l.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},54593:(e,t,n)=>{function l(e,t,n){return e>0?Math.max(0,(1+e)*t-n):0}function s(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function i(e,t){return"desc"===e?(e,n)=>s(e,n,t):(e,n)=>-s(e,n,t)}n.d(t,{dO:()=>m,er:()=>w,Sm:()=>p,We:()=>D,Uv:()=>b,xl:()=>l,hz:()=>i,K2:()=>o});var a=n(9950);function o(e){const[t,n]=(0,a.useState)(!(null===e||void 0===e||!e.defaultDense)),[l,s]=(0,a.useState)((null===e||void 0===e?void 0:e.defaultOrderBy)||"name"),[i,o]=(0,a.useState)((null===e||void 0===e?void 0:e.defaultOrder)||"asc"),[r,c]=(0,a.useState)((null===e||void 0===e?void 0:e.defaultCurrentPage)||0),[d,u]=(0,a.useState)((null===e||void 0===e?void 0:e.defaultRowsPerPage)||5),[h,x]=(0,a.useState)((null===e||void 0===e?void 0:e.defaultSelected)||[]),g=(0,a.useCallback)((e=>{""!==e&&(o(l===e&&"asc"===i?"desc":"asc"),s(e))}),[i,l]),p=(0,a.useCallback)((e=>{const t=h.indexOf(e);let n=[];-1===t?n=n.concat(h,e):0===t?n=n.concat(h.slice(1)):t===h.length-1?n=n.concat(h.slice(0,-1)):t>0&&(n=n.concat(h.slice(0,t),h.slice(t+1))),x(n)}),[h]),m=(0,a.useCallback)(((e,t)=>{x(e?t:[])}),[]),A=(0,a.useCallback)(((e,t)=>{c(t)}),[]),f=(0,a.useCallback)((e=>{c(0),u(parseInt(e.target.value,10))}),[]),j=(0,a.useCallback)((e=>{n(e.target.checked)}),[]);return{dense:t,order:i,page:r,orderBy:l,rowsPerPage:d,selected:h,onSelectRow:p,onSelectAllRows:m,onSort:g,onChangePage:A,onChangeDense:j,onChangeRowsPerPage:f,setPage:c,setDense:n,setOrder:o,setOrderBy:s,setSelected:x,setRowsPerPage:u}}var r=n(9213),c=n(21671),d=n(12257),u=n(82053),h=n(7653),x=n(44414);function g(e){let{title:t,description:n,img:l,sx:s,...i}=e;return(0,x.jsxs)(d.A,{alignItems:"center",justifyContent:"center",sx:{height:1,textAlign:"center",p:e=>e.spacing(8,2),...s},...i,children:[(0,x.jsx)(h.A,{disabledEffect:!0,alt:"empty content",src:l||"/assets/illustrations/illustration_empty_content.svg",sx:{height:240,mb:3}}),(0,x.jsx)(u.A,{variant:"h5",gutterBottom:!0,children:t}),n&&(0,x.jsx)(u.A,{variant:"body2",sx:{color:"text.secondary"},children:n})]})}function p(e){let{isNotFound:t}=e;return(0,x.jsx)(r.A,{children:t?(0,x.jsx)(c.A,{colSpan:12,children:(0,x.jsx)(g,{title:"No Data",sx:{"& span.MuiBox-root":{height:160}}})}):(0,x.jsx)(c.A,{colSpan:12,sx:{p:0}})})}function m(e){let{emptyRows:t,height:n}=e;return t?(0,x.jsx)(r.A,{sx:{...n&&{height:n*t}},children:(0,x.jsx)(c.A,{colSpan:9})}):null}var A=n(69780),f=n(7251),j=n(53011);const v={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function w(e){let{order:t,orderBy:n,rowCount:l=0,headLabel:s,numSelected:i=0,onSort:a,onSelectAllRows:o,sx:d}=e;return(0,x.jsx)(A.A,{sx:d,children:(0,x.jsx)(r.A,{children:s.map((e=>(0,x.jsx)(c.A,{align:e.align||"left",sortDirection:n===e.id&&t,sx:{width:e.width,minWidth:e.minWidth},children:a?(0,x.jsxs)(f.A,{hideSortIcon:!0,active:n===e.id,direction:n===e.id?t:"asc",onClick:()=>a(e.id),sx:{textTransform:"capitalize"},children:[e.label,n===e.id?(0,x.jsx)(j.A,{sx:{...v},children:"desc"===t?"sorted descending":"sorted ascending"}):null]}):e.label},e.id)))})})}var y=n(93038);function b(e){let{dense:t,action:n,rowCount:l,numSelected:s,onSelectAllRows:i,sx:a,...o}=e;return s?(0,x.jsxs)(d.A,{direction:"row",alignItems:"center",sx:{pl:1,pr:2,top:0,left:0,width:1,zIndex:9,height:58,position:"absolute",bgcolor:"primary.lighter",...t&&{height:38},...a},...o,children:[(0,x.jsx)(y.A,{indeterminate:s>0&&s<l,checked:l>0&&s===l,onChange:e=>i(e.target.checked)}),(0,x.jsxs)(u.A,{variant:"subtitle1",sx:{ml:2,flexGrow:1,color:"primary.main",...t&&{ml:3}},children:[s," selected"]}),n&&n]}):null}var S=n(91434),C=n(16497),k=n(37324);function D(e){let{dense:t,onChangeDense:n,rowsPerPageOptions:l=[5,10,25],sx:s,...i}=e;return(0,x.jsxs)(j.A,{sx:{position:"relative",...s},children:[(0,x.jsx)(S.A,{rowsPerPageOptions:l,component:"div",...i}),n&&(0,x.jsx)(C.A,{label:"Dense",control:(0,x.jsx)(k.A,{checked:t,onChange:n}),sx:{pl:2,py:1.5,top:0,position:{sm:"absolute"}}})]})}},65400:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var l=n(76455),s=n(9950),i=n(19808),a=n(48089),o=n(38200),r=n(84142),c=n(45098),d=n(74745),u=n(1320),h=n(83274),x=n(25333),g=n(15769),p=n(34075),m=n(82053),A=n(57404),f=n(23266),j=n(4753),v=n(90260),w=n(39332),y=n(64071),b=n(78084),S=n(87033),C=n(3320),k=n(54593),D=n(9213),R=n(21671),P=n(39635),B=n(44414);function L(e){let{row:t,selected:n,onEditRow:l,onSelectRow:i,onDeleteRow:a}=e;const{name:o,preferred_location:r,location:d,phone_number:u,description:h,created_at:g}=t,[p,m]=(0,s.useState)(!1),[A,j]=(0,s.useState)(null),v=()=>{j(null)};return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(D.A,{hover:!0,selected:n,children:[(0,B.jsx)(R.A,{align:"left",sx:{textTransform:"capitalize"},children:o}),(0,B.jsx)(R.A,{align:"left",sx:{textTransform:"capitalize"},children:r}),(0,B.jsx)(R.A,{align:"left",sx:{textTransform:"capitalize"},children:d}),(0,B.jsx)(R.A,{align:"left",sx:{textTransform:"capitalize"},children:u}),(0,B.jsx)(R.A,{align:"left",sx:{textTransform:"capitalize"},children:h}),(0,B.jsx)(R.A,{align:"left",sx:{textTransform:"capitalize"},children:g}),(0,B.jsx)(R.A,{align:"right",children:(0,B.jsx)(x.A,{color:A?"inherit":"default",onClick:e=>{j(e.currentTarget)},children:(0,B.jsx)(w.A,{icon:"eva:more-vertical-fill"})})})]}),(0,B.jsx)(P.A,{open:A,onClose:v,arrow:"right-top",sx:{width:140},children:(0,B.jsxs)(f.A,{onClick:()=>{m(!0),v()},sx:{color:"error.main"},children:[(0,B.jsx)(w.A,{icon:"eva:trash-2-outline"}),"Delete"]})}),(0,B.jsx)(b.A,{open:p,onClose:()=>{m(!1)},title:"Delete",content:"Are you sure want to delete?",action:(0,B.jsx)(c.A,{variant:"contained",color:"error",onClick:a,children:"Delete"})})]})}var F=n(12257),N=n(16987),_=n(2046);function z(e){let{isFiltered:t,filterName:n,filterRole:l,optionsRole:s,onFilterName:i,onFilterRole:a,onResetFilter:o}=e;return(0,B.jsx)(F.A,{spacing:2,alignItems:"center",direction:{xs:"column",sm:"row"},sx:{px:2.5,py:3},children:(0,B.jsx)(N.A,{fullWidth:!0,value:n,onChange:i,placeholder:"Search...",InputProps:{startAdornment:(0,B.jsx)(_.A,{position:"start",children:(0,B.jsx)(w.A,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})}const M=n(29994).FH.injectEndpoints({reducerPath:"apiUser",endpoints:e=>({getMessages:e.query({query:e=>"/messages?page=".concat(e,"&per_page=5"),providesTags:["messages"]}),deleteMessages:e.mutation({query:t=>({url:"/messages/".concat(t),method:"Delete",body:e}),invalidatesTags:["/messages"]})})}),{useGetMessagesQuery:O,useDeleteMessagesMutation:T}=M;var I=n(86898),W=n(45744),E=n(13880),U=n(78397);var q=n(97429);var G=n(81417),K=n(49820);var H=n(94289),J=n(59113),Q=n(57326);const V=["today","yesterday","last week","this month","last month"],X=["all","activ","unActiv"],Y=[{id:"name",label:"Name",align:"left"},{id:"preferred_location",label:"Unit Type",align:"left"},{id:"location",label:"Location",align:"left"},{id:"phone_number",label:"Phone Number",align:"left"},{id:"description",label:"Description",align:"left"},{id:"Date",label:"Date",align:"left"},{id:"",label:"",align:"left"}];function Z(){var e,t;const{dense:n,page:D,order:R,orderBy:P,setPage:F,selected:N,setSelected:_,onSelectRow:M,onSelectAllRows:W,onSort:E}=(0,k.K2)(),{themeStretch:U}=(0,C.Mp)(),[q,G]=(0,s.useState)(1),[K,H]=(0,s.useState)(5),{data:J,isServiseLoading:Q,refetch:Z}=O({currentPage:q,limit:K}),[te,ne]=(0,s.useState)([]);(0,s.useEffect)((()=>{var e;J&&!Q&&ne(null===J||void 0===J||null===(e=J.data)||void 0===e?void 0:e.data)}),[J,te,Q]);const[le,se]=(0,s.useState)(!1),[ie,ae]=(0,s.useState)(""),[oe,re]=(0,s.useState)("all"),[ce,de]=(0,s.useState)("today"),ue=$({inputData:te,comparator:(0,k.hz)(R,P),filterName:ie,filterRole:oe,filterStatus:ce}),he=ue.slice(D*K,D*K+K),xe=n?52:72,ge=""!==ie||"all"!==oe||"today"!==ce,pe=!ue.length&&!!ie||!ue.length&&!!oe||!ue.length&&!!ce,me=()=>{se(!1)},[Ae]=T();return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(l.mg,{children:(0,B.jsx)("title",{children:" Messages: List "})}),(0,B.jsxs)(i.A,{maxWidth:!U&&"lg",children:[(0,B.jsx)(S.A,{heading:"Messages List",links:[{name:"Dashboard",href:v.nB.root},{name:"Messages",href:v.nB.messages.list},{name:"List"}]}),(0,B.jsxs)(a.A,{children:[(0,B.jsxs)(I.A,{sx:{px:2,py:1,bgcolor:"background.neutral",display:"flex",justifyContent:"space-between"},children:[(0,B.jsx)(o.A,{value:ce,onChange:(e,t)=>{F(0),de(t)},children:V.map((e=>(0,B.jsx)(r.A,{label:e,value:e},e)))}),(0,B.jsx)(c.A,{onClick:()=>{const e=$({inputData:te,comparator:(0,k.hz)(R,P),filterName:ie,filterRole:oe,filterStatus:ce}),t=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-");!function(e,t){const n=[],l=Object.keys(e[0]);n.push(l.join(",")),e.forEach((e=>{const t=l.map((t=>JSON.stringify(e[t],ee)));n.push(t.join(","))}));const s=n.join("\n"),i=new Blob(["\ufeff",s],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(i,t);else{const e=document.createElement("a"),n=URL.createObjectURL(i);e.href=n,e.setAttribute("download",t),document.body.appendChild(e),e.click(),document.body.removeChild(e)}}(e,"messages_".concat(ce,"_").concat(t,".csv"))},variant:"contained",color:"primary",children:"Export to CSV"})]}),(0,B.jsx)(d.A,{}),(0,B.jsx)(z,{isFiltered:ge,filterName:ie,filterRole:oe,optionsRole:X,onFilterName:e=>{F(0),ae(e.target.value)},onFilterRole:e=>{F(0),re(e.target.value)},onResetFilter:()=>{ae(""),re("all"),de("today")}}),(0,B.jsxs)(u.A,{sx:{position:"relative",overflow:"unset"},children:[(0,B.jsx)(k.Uv,{dense:n,numSelected:N.length,rowCount:te.length,onSelectAllRows:e=>W(e,te.map((e=>e.id))),action:(0,B.jsx)(h.A,{title:"Delete",children:(0,B.jsx)(x.A,{color:"primary",onClick:()=>{se(!0)},children:(0,B.jsx)(w.A,{icon:"eva:trash-2-outline"})})})}),(0,B.jsx)(y.A,{children:(0,B.jsxs)(g.A,{size:n?"small":"medium",sx:{minWidth:800},children:[(0,B.jsx)(k.er,{order:R,orderBy:P,headLabel:Y,rowCount:te.length,numSelected:N.length,onSort:E,onSelectAllRows:e=>W(e,te.map((e=>e.id)))}),(0,B.jsxs)(p.A,{children:[ue.slice(D*K,D*K+K).map((e=>(0,B.jsx)(L,{row:e,selected:N.includes(null===e||void 0===e?void 0:e.id),onSelectRow:()=>M(null===e||void 0===e?void 0:e.id),onDeleteRow:()=>(async e=>{await Ae(e);const t=null===te||void 0===te?void 0:te.filter((t=>(null===t||void 0===t?void 0:t.id)!==e));_([]),ne(t),Z(),D>0&&he.length<2&&F(D-1)})(null===e||void 0===e?void 0:e.id)},null===e||void 0===e?void 0:e.id))),(0,B.jsx)(k.dO,{height:xe,emptyRows:(0,k.xl)(D,K,te.length)}),(0,B.jsx)(k.Sm,{isNotFound:pe})]})]})})]}),(0,B.jsxs)(I.A,{sx:{display:"flex",justifyContent:"space-around",py:2,alignItems:"center"},children:[(0,B.jsxs)(m.A,{fontSize:"small",children:[K," item in each page"]}),(0,B.jsxs)(A.A,{value:K,onChange:e=>{H(e.target.value),G(1)},style:{width:"75px",height:"35px"},children:[(0,B.jsx)(f.A,{value:5,children:"5"}),(0,B.jsx)(f.A,{value:10,children:"10"}),(0,B.jsx)(f.A,{value:20,children:"20"}),(0,B.jsx)(f.A,{value:50,children:"50"})]}),(0,B.jsx)(j.A,{count:null===J||void 0===J||null===(e=J.data)||void 0===e?void 0:e.last_page,shape:"rounded",page:q,showFirstButton:!0,showLastButton:!0,onChange:(e,t)=>{G(t)}}),(0,B.jsxs)(m.A,{fontSize:"small",children:["item available ",null===J||void 0===J||null===(t=J.data)||void 0===t?void 0:t.total]})]})]})]}),(0,B.jsx)(b.A,{open:le,onClose:me,title:"Delete",content:(0,B.jsxs)(B.Fragment,{children:["Are you sure want to delete"," ",(0,B.jsxs)("strong",{children:[" ",N.length," "]})," items?"]}),action:(0,B.jsx)(c.A,{variant:"contained",color:"error",onClick:()=>{me()},children:"Delete"})})]})}function $(e){let{inputData:t,comparator:n,filterName:l,filterStatus:s,filterRole:i}=e;const a=t.map(((e,t)=>[e,t]));return a.sort(((e,t)=>{const l=n(e[0],t[0]);return 0!==l?l:e[1]-t[1]})),t=a.map((e=>e[0])),l&&(t=t.filter((e=>-1!==e.name.ar.toLowerCase().indexOf(l.toLowerCase())))),s&&(t=t.filter((e=>{const t=(0,W.A)(e.created_at,"yyyy-MM-dd hh:mm a",new Date);switch(s){case"today":return function(e){return(0,U.A)(1,arguments),(0,E.A)(e,Date.now())}(t);case"yesterday":return function(e){return(0,U.A)(1,arguments),(0,E.A)(e,(0,q.A)(Date.now(),1))}(t);case"last week":return t>=(0,G.A)(new Date,{weekStartsOn:0})&&t<new Date;case"this month":return function(e){return(0,U.A)(1,arguments),(0,K.A)(Date.now(),e)}(t);case"last month":(0,H.A)(new Date);const e=(0,H.A)((0,J.A)(new Date,1)),n=(0,Q.A)((0,J.A)(new Date,1));return t>=e&&t<=n;default:return!0}}))),"all"!==i&&(t=t.filter((e=>e.role===i))),t}function ee(e,t){return null===t?"":t}},86898:(e,t,n)=>{n.d(t,{A:()=>a});var l=n(41681),s=n(12639);const i=(0,n(80863).A)("MuiBox",["root"]),a=(0,s.A)({defaultClassName:i.root,generateClassName:l.A.generate})}}]);