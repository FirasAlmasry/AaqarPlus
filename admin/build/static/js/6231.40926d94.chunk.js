"use strict";(self.webpackChunkadmin_plus=self.webpackChunkadmin_plus||[]).push([[6231],{78084:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(63464),l=n(40033),r=n(28170),s=n(79739),a=n(45098),o=n(44414);function c(e){let{title:t,content:n,action:c,open:d,onClose:h,...u}=e;return(0,o.jsxs)(i.A,{fullWidth:!0,maxWidth:"xs",open:d,onClose:h,...u,children:[(0,o.jsx)(l.A,{sx:{pb:2},children:t}),n&&(0,o.jsxs)(r.A,{sx:{typography:"body2"},children:[" ",n," "]}),(0,o.jsxs)(s.A,{children:[c,(0,o.jsx)(a.A,{variant:"outlined",color:"inherit",onClick:h,children:"Cancel"})]})]})}},87033:(e,t,n)=>{n.d(t,{A:()=>h});var i=n(53011),l=n(12257),r=n(82053),s=n(52432),a=n(36080),o=n(42074),c=n(44414);function d(e){let{link:t,activeLast:n,disabled:l}=e;const{name:r,href:s,icon:d}=t,h={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...l&&!n&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},u=(0,c.jsxs)(c.Fragment,{children:[d&&(0,c.jsx)(i.A,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:d}),r]});return s?(0,c.jsx)(a.A,{component:o.N_,to:s,sx:h,children:u}):(0,c.jsxs)(i.A,{sx:h,children:[" ",u," "]})}function h(e){let{links:t,action:n,heading:o,moreLink:h,activeLast:x,sx:g,...p}=e;const m=t[t.length-1].name;return(0,c.jsxs)(i.A,{sx:{mb:5,...g},children:[(0,c.jsxs)(l.A,{direction:"row",alignItems:"center",children:[(0,c.jsxs)(i.A,{sx:{flexGrow:1},children:[o&&(0,c.jsx)(r.A,{variant:"h4",gutterBottom:!0,children:o}),!!t.length&&(0,c.jsx)(s.A,{separator:(0,c.jsx)(u,{}),...p,children:t.map((e=>(0,c.jsx)(d,{link:e,activeLast:x,disabled:e.name===m},e.name||"")))})]}),n&&(0,c.jsxs)(i.A,{sx:{flexShrink:0},children:[" ",n," "]})]}),!!h&&(0,c.jsx)(i.A,{sx:{mt:2},children:h.map((e=>(0,c.jsx)(a.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}function u(){return(0,c.jsx)(i.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},54593:(e,t,n)=>{function i(e,t,n){return e>0?Math.max(0,(1+e)*t-n):0}function l(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function r(e,t){return"desc"===e?(e,n)=>l(e,n,t):(e,n)=>-l(e,n,t)}n.d(t,{dO:()=>m,er:()=>w,Sm:()=>p,We:()=>k,Uv:()=>b,xl:()=>i,hz:()=>r,K2:()=>a});var s=n(9950);function a(e){const[t,n]=(0,s.useState)(!(null===e||void 0===e||!e.defaultDense)),[i,l]=(0,s.useState)((null===e||void 0===e?void 0:e.defaultOrderBy)||"name"),[r,a]=(0,s.useState)((null===e||void 0===e?void 0:e.defaultOrder)||"asc"),[o,c]=(0,s.useState)((null===e||void 0===e?void 0:e.defaultCurrentPage)||0),[d,h]=(0,s.useState)((null===e||void 0===e?void 0:e.defaultRowsPerPage)||5),[u,x]=(0,s.useState)((null===e||void 0===e?void 0:e.defaultSelected)||[]),g=(0,s.useCallback)((e=>{""!==e&&(a(i===e&&"asc"===r?"desc":"asc"),l(e))}),[r,i]),p=(0,s.useCallback)((e=>{const t=u.indexOf(e);let n=[];-1===t?n=n.concat(u,e):0===t?n=n.concat(u.slice(1)):t===u.length-1?n=n.concat(u.slice(0,-1)):t>0&&(n=n.concat(u.slice(0,t),u.slice(t+1))),x(n)}),[u]),m=(0,s.useCallback)(((e,t)=>{x(e?t:[])}),[]),v=(0,s.useCallback)(((e,t)=>{c(t)}),[]),A=(0,s.useCallback)((e=>{c(0),h(parseInt(e.target.value,10))}),[]),j=(0,s.useCallback)((e=>{n(e.target.checked)}),[]);return{dense:t,order:r,page:o,orderBy:i,rowsPerPage:d,selected:u,onSelectRow:p,onSelectAllRows:m,onSort:g,onChangePage:v,onChangeDense:j,onChangeRowsPerPage:A,setPage:c,setDense:n,setOrder:a,setOrderBy:l,setSelected:x,setRowsPerPage:h}}var o=n(9213),c=n(21671),d=n(12257),h=n(82053),u=n(7653),x=n(44414);function g(e){let{title:t,description:n,img:i,sx:l,...r}=e;return(0,x.jsxs)(d.A,{alignItems:"center",justifyContent:"center",sx:{height:1,textAlign:"center",p:e=>e.spacing(8,2),...l},...r,children:[(0,x.jsx)(u.A,{disabledEffect:!0,alt:"empty content",src:i||"/assets/illustrations/illustration_empty_content.svg",sx:{height:240,mb:3}}),(0,x.jsx)(h.A,{variant:"h5",gutterBottom:!0,children:t}),n&&(0,x.jsx)(h.A,{variant:"body2",sx:{color:"text.secondary"},children:n})]})}function p(e){let{isNotFound:t}=e;return(0,x.jsx)(o.A,{children:t?(0,x.jsx)(c.A,{colSpan:12,children:(0,x.jsx)(g,{title:"No Data",sx:{"& span.MuiBox-root":{height:160}}})}):(0,x.jsx)(c.A,{colSpan:12,sx:{p:0}})})}function m(e){let{emptyRows:t,height:n}=e;return t?(0,x.jsx)(o.A,{sx:{...n&&{height:n*t}},children:(0,x.jsx)(c.A,{colSpan:9})}):null}var v=n(69780),A=n(7251),j=n(53011);const f={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function w(e){let{order:t,orderBy:n,rowCount:i=0,headLabel:l,numSelected:r=0,onSort:s,onSelectAllRows:a,sx:d}=e;return(0,x.jsx)(v.A,{sx:d,children:(0,x.jsx)(o.A,{children:l.map((e=>(0,x.jsx)(c.A,{align:e.align||"left",sortDirection:n===e.id&&t,sx:{width:e.width,minWidth:e.minWidth},children:s?(0,x.jsxs)(A.A,{hideSortIcon:!0,active:n===e.id,direction:n===e.id?t:"asc",onClick:()=>s(e.id),sx:{textTransform:"capitalize"},children:[e.label,n===e.id?(0,x.jsx)(j.A,{sx:{...f},children:"desc"===t?"sorted descending":"sorted ascending"}):null]}):e.label},e.id)))})})}var S=n(93038);function b(e){let{dense:t,action:n,rowCount:i,numSelected:l,onSelectAllRows:r,sx:s,...a}=e;return l?(0,x.jsxs)(d.A,{direction:"row",alignItems:"center",sx:{pl:1,pr:2,top:0,left:0,width:1,zIndex:9,height:58,position:"absolute",bgcolor:"primary.lighter",...t&&{height:38},...s},...a,children:[(0,x.jsx)(S.A,{indeterminate:l>0&&l<i,checked:i>0&&l===i,onChange:e=>r(e.target.checked)}),(0,x.jsxs)(h.A,{variant:"subtitle1",sx:{ml:2,flexGrow:1,color:"primary.main",...t&&{ml:3}},children:[l," selected"]}),n&&n]}):null}var C=n(91434),y=n(16497),R=n(37324);function k(e){let{dense:t,onChangeDense:n,rowsPerPageOptions:i=[5,10,25],sx:l,...r}=e;return(0,x.jsxs)(j.A,{sx:{position:"relative",...l},children:[(0,x.jsx)(C.A,{rowsPerPageOptions:i,component:"div",...r}),n&&(0,x.jsx)(y.A,{label:"Dense",control:(0,x.jsx)(R.A,{checked:t,onChange:n}),sx:{pl:2,py:1.5,top:0,position:{sm:"absolute"}}})]})}},16231:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var i=n(76455),l=n(94614),r=n(9950),s=n(28429),a=n(42074),o=n(19808),c=n(45098),d=n(48089),h=n(38200),u=n(84142),x=n(74745),g=n(1320),p=n(83274),m=n(25333),v=n(15769),A=n(34075),j=n(90260),f=n(39332),w=n(64071),S=n(78084),b=n(87033),C=n(3320),y=n(54593),R=n(9213),k=n(21671),P=n(12257),D=n(62854),F=n(82053),B=n(23266),I=n(39635),L=n(44414);function N(e){let{row:t,selected:n,onEditRow:i,onSelectRow:l,onDeleteRow:s}=e;const{name:a,icon:o}=t,d="https://aqarbackend.revampbrands.com/storage/".concat(o),[h,u]=(0,r.useState)(!1),[x,g]=(0,r.useState)(null),p=()=>{g(null)};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(R.A,{hover:!0,selected:n,children:[(0,L.jsx)(k.A,{children:(0,L.jsxs)(P.A,{direction:"row",alignItems:"center",spacing:2,children:[(0,L.jsx)(D.A,{alt:a.en,src:d}),(0,L.jsx)(F.A,{variant:"subtitle2",noWrap:!0,children:a.en})]})}),(0,L.jsx)(k.A,{align:"left",sx:{textTransform:"capitalize"},children:a.ar}),(0,L.jsx)(k.A,{align:"right",children:(0,L.jsx)(m.A,{color:x?"inherit":"default",onClick:e=>{g(e.currentTarget)},children:(0,L.jsx)(f.A,{icon:"eva:more-vertical-fill"})})})]}),(0,L.jsxs)(I.A,{open:x,onClose:p,arrow:"right-top",sx:{width:140},children:[(0,L.jsxs)(B.A,{onClick:()=>{u(!0),p()},sx:{color:"error.main"},children:[(0,L.jsx)(f.A,{icon:"eva:trash-2-outline"}),"Delete"]}),(0,L.jsxs)(B.A,{onClick:()=>{i(),p()},children:[(0,L.jsx)(f.A,{icon:"eva:edit-fill"}),"Edit"]})]}),(0,L.jsx)(S.A,{open:h,onClose:()=>{u(!1)},title:"Delete",content:"Are you sure want to delete?",action:(0,L.jsx)(c.A,{variant:"contained",color:"error",onClick:s,children:"Delete"})})]})}var O=n(16987),W=n(2046);function E(e){let{isFiltered:t,filterName:n,filterRole:i,optionsRole:l,onFilterName:r,onFilterRole:s,onResetFilter:a}=e;return(0,L.jsx)(P.A,{spacing:2,alignItems:"center",direction:{xs:"column",sm:"row"},sx:{px:2.5,py:3},children:(0,L.jsx)(O.A,{fullWidth:!0,value:n,onChange:r,placeholder:"Search...",InputProps:{startAdornment:(0,L.jsx)(W.A,{position:"start",children:(0,L.jsx)(f.A,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})}var T=n(86210),q=n(22329);const M=[],z=["all","activ","unActiv"],_=[{id:"name",label:"name-en",align:"left"},{id:"nameEn",label:"name-ar",align:"left"},{id:""}];function Z(){var e;const{dense:t,page:n,order:R,orderBy:k,rowsPerPage:P,setPage:D,selected:F,setSelected:B,onSelectRow:I,onSelectAllRows:O,onSort:W,onChangeDense:Z,onChangePage:G,onChangeRowsPerPage:Q}=(0,y.K2)(),{themeStretch:U}=(0,C.Mp)(),K=(0,s.Zp)(),{enqueueSnackbar:$}=(0,q.dh)(),{data:H,isServiseLoading:J,refetch:V}=(0,T.DM)(),[X,Y]=(0,r.useState)([]);(0,r.useEffect)((()=>{var e;H&&!J&&Y(null===H||void 0===H||null===(e=H.data)||void 0===e?void 0:e.data)}),[H,X,J]);const[ee,te]=(0,r.useState)(!1),[ne,ie]=(0,r.useState)(""),[le,re]=(0,r.useState)("all"),[se,ae]=(0,r.useState)("all"),oe=function(e){let{inputData:t,comparator:n,filterName:i,filterStatus:l,filterRole:r}=e;const s=t.map(((e,t)=>[e,t]));s.sort(((e,t)=>{const i=n(e[0],t[0]);return 0!==i?i:e[1]-t[1]})),t=s.map((e=>e[0])),i&&(t=t.filter((e=>{var t;return-1!==(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.ar.toLowerCase().indexOf(i.toLowerCase()))})));"all"!==l&&(t=t.filter((e=>e.active===l)));"all"!==r&&(t=t.filter((e=>e.role===r)));return t}({inputData:X,comparator:(0,y.hz)(R,k),filterName:ne,filterRole:le,filterStatus:se}),ce=oe.slice(n*P,n*P+P),de=t?52:72,he=""!==ne||"all"!==le||"all"!==se,ue=!oe.length&&!!ne||!oe.length&&!!le||!oe.length&&!!se,xe=()=>{te(!1)},[ge]=(0,T.vm)();return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(i.mg,{children:(0,L.jsx)("title",{children:" Facilities: List "})}),(0,L.jsxs)(o.A,{maxWidth:!U&&"lg",children:[(0,L.jsx)(b.A,{heading:"Facilities List",links:[{name:"Dashboard",href:j.nB.root},{name:"Facilities",href:j.nB.attaches.list},{name:"List"}],action:(0,L.jsx)(c.A,{component:a.N_,to:j.nB.attaches.new,variant:"contained",startIcon:(0,L.jsx)(f.A,{icon:"eva:plus-fill"}),children:"New Facilities"})}),(0,L.jsxs)(d.A,{children:[(0,L.jsx)(h.A,{value:se,onChange:(e,t)=>{D(0),ae(t)},sx:{px:2,bgcolor:"background.neutral"},children:M.map((e=>(0,L.jsx)(u.A,{label:e,value:e},e)))}),(0,L.jsx)(x.A,{}),(0,L.jsx)(E,{isFiltered:he,filterName:ne,filterRole:le,optionsRole:z,onFilterName:e=>{D(0),ie(e.target.value)},onFilterRole:e=>{D(0),re(e.target.value)},onResetFilter:()=>{ie(""),re("all"),ae("all")}}),(0,L.jsxs)(g.A,{sx:{position:"relative",overflow:"unset"},children:[(0,L.jsx)(y.Uv,{dense:t,numSelected:F.length,rowCount:X.length,onSelectAllRows:e=>O(e,X.map((e=>e.id))),action:(0,L.jsx)(p.A,{title:"Delete",children:(0,L.jsx)(m.A,{color:"primary",onClick:()=>{te(!0)},children:(0,L.jsx)(f.A,{icon:"eva:trash-2-outline"})})})}),(0,L.jsx)(w.A,{children:(0,L.jsxs)(v.A,{size:t?"small":"medium",sx:{minWidth:800},children:[(0,L.jsx)(y.er,{order:R,orderBy:k,headLabel:_,rowCount:X.length,numSelected:F.length,onSort:W,onSelectAllRows:e=>O(e,X.map((e=>e.id)))}),(0,L.jsxs)(A.A,{children:[oe.slice(n*P,n*P+P).map((e=>(0,L.jsx)(N,{row:e,selected:F.includes(null===e||void 0===e?void 0:e.id),onSelectRow:()=>I(null===e||void 0===e?void 0:e.id),onDeleteRow:()=>(async e=>{try{await ge(e);const t=null===X||void 0===X?void 0:X.filter((t=>(null===t||void 0===t?void 0:t.id)!==e));B([]),Y(t),V(),n>0&&ce.length<2&&D(n-1)}catch(t){console.error("An error occurred while deleting facility:",t);const e=t.message||"An error occurred";$(e,{variant:"error"})}})(null===e||void 0===e?void 0:e.id),onEditRow:()=>{return t=null===e||void 0===e?void 0:e.id,t=String(t),void K(j.nB.attaches.edit((0,l.c)(t)));var t}},null===e||void 0===e?void 0:e.id))),(0,L.jsx)(y.dO,{height:de,emptyRows:(0,y.xl)(n,P,X.length)}),(0,L.jsx)(y.Sm,{isNotFound:ue})]})]})})]}),(0,L.jsx)(y.We,{count:null===H||void 0===H||null===(e=H.data)||void 0===e?void 0:e.total,page:n,rowsPerPage:P,onPageChange:G,onRowsPerPageChange:Q,dense:t,onChangeDense:Z})]})]}),(0,L.jsx)(S.A,{open:ee,onClose:xe,title:"Delete",content:(0,L.jsxs)(L.Fragment,{children:["Are you sure want to delete"," ",(0,L.jsxs)("strong",{children:[" ",F.length," "]})," items?"]}),action:(0,L.jsx)(c.A,{variant:"contained",color:"error",onClick:()=>{(e=>{const t=X.filter((t=>!e.includes(t.id)));if(B([]),Y(t),n>0)if(e.length===ce.length)D(n-1);else if(e.length===oe.length)D(0);else if(e.length>ce.length){const t=Math.ceil((X.length-e.length)/P)-1;D(t)}})(F),xe()},children:"Delete"})})]})}},86210:(e,t,n)=>{n.d(t,{DM:()=>l,QN:()=>a,Zx:()=>r,sQ:()=>s,vm:()=>o});const i=n(29994).FH.injectEndpoints({reducerPath:"apiUser",endpoints:e=>({getAttacheds:e.query({query:()=>"/attacheds?per_page=100"}),invalidatesTags:["attacheds"],getAttachedsId:e.query({query:e=>"/attacheds/".concat(e),invalidatesTags:["attacheds"]}),addAttacheds:e.mutation({query:e=>({url:"/attacheds",method:"POST",body:e}),invalidatesTags:["attacheds"]}),editAttacheds:e.mutation({query:e=>{let{formData:t,id:n}=e;return{url:"/attacheds/".concat(n),method:"POST",body:t}},invalidatesTags:["attacheds"]}),deleteAttacheds:e.mutation({query:t=>({url:"/attacheds/".concat(t),method:"Delete",body:e}),invalidatesTags:["attacheds"]})})}),{useGetAttachedsQuery:l,useAddAttachedsMutation:r,useEditAttachedsMutation:s,useGetAttachedsIdQuery:a,useDeleteAttachedsMutation:o}=i},68639:(e,t,n)=>{n.d(t,{a:()=>o});var i=n(37827);function l(e){return e.toLowerCase()}var r=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],s=/[^A-Z0-9]+/gi;function a(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce((function(e,t){return e.replace(t,n)}),e)}function o(e,t){return void 0===t&&(t={}),function(e,t){void 0===t&&(t={});for(var n=t.splitRegexp,i=void 0===n?r:n,o=t.stripRegexp,c=void 0===o?s:o,d=t.transform,h=void 0===d?l:d,u=t.delimiter,x=void 0===u?" ":u,g=a(a(e,i,"$1\0$2"),c,"\0"),p=0,m=g.length;"\0"===g.charAt(p);)p++;for(;"\0"===g.charAt(m-1);)m--;return g.slice(p,m).split("\0").map(h).join(x)}(e,(0,i.Cl)({delimiter:"."},t))}},94614:(e,t,n)=>{n.d(t,{c:()=>r});var i=n(37827),l=n(68639);function r(e,t){return void 0===t&&(t={}),(0,l.a)(e,(0,i.Cl)({delimiter:"-"},t))}}}]);