"use strict";(self.webpackChunkadmin_plus=self.webpackChunkadmin_plus||[]).push([[2883],{62883:(e,s,r)=>{r.r(s),r.d(s,{default:()=>A});var t=r(76455),n=r(42074),o=r(82053),a=r(36080),i=r(90260),d=r(39332),l=r(9950),c=r(29714),u=r(28429),m=r(9449),h=r(26473),p=r(12257),x=r(2046),w=r(25333),f=r(28095),j=r(26997),y=r(54146),g=r(5321),b=r(44414);function P(){const e=(0,u.Zp)(),[s]=(0,n.ok)(),{enqueueSnackbar:r}=(0,j.dh)(),[t,o]=(0,l.useState)(!1),a=c.Ik().shape({password:c.Yj().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:c.Yj().required("Confirm password is required").oneOf([c.KR("password")],"Passwords must match")}),P=(0,m.mN)({mode:"onChange",resolver:(0,h.t)(a),defaultValues:{password:"",confirmPassword:""}}),{handleSubmit:v,formState:{isSubmitting:A,errors:k}}=P,[q]=(0,g.QX)();console.log({token:s.get("token"),userId:s.get("id")});return(0,b.jsx)(y.Ay,{methods:P,onSubmit:v((async t=>{try{await q({token:s.get("token"),userId:s.get("id"),password:t.password}),sessionStorage.removeItem("email-recovery"),r("Change password success!"),e(i.nB.root)}catch(n){console.error(n)}})),children:(0,b.jsxs)(p.A,{spacing:3,children:[(0,b.jsx)(y.o3,{name:"password",label:"Password",type:t?"text":"password",InputProps:{endAdornment:(0,b.jsx)(x.A,{position:"end",children:(0,b.jsx)(w.A,{onClick:()=>o(!t),edge:"end",children:(0,b.jsx)(d.A,{icon:t?"eva:eye-fill":"eva:eye-off-fill"})})})}}),(0,b.jsx)(y.o3,{name:"confirmPassword",label:"Confirm New Password",type:t?"text":"password",InputProps:{endAdornment:(0,b.jsx)(x.A,{position:"end",children:(0,b.jsx)(w.A,{onClick:()=>o(!t),edge:"end",children:(0,b.jsx)(d.A,{icon:t?"eva:eye-fill":"eva:eye-off-fill"})})})}}),(0,b.jsx)(f.A,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:A,sx:{mt:3},children:"Update Password"})]})})}var v=r(22277);function A(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.mg,{children:(0,b.jsx)("title",{children:" New Password "})}),(0,b.jsx)(v.m1,{sx:{mb:5,height:96}}),(0,b.jsx)(o.A,{variant:"h3",paragraph:!0,children:"Request sent successfully!"}),(0,b.jsxs)(o.A,{sx:{color:"text.secondary",mb:5},children:["We've sent a 6-digit confirmation email to your email.",(0,b.jsx)("br",{}),"Please enter the code in below box to verify your email."]}),(0,b.jsx)(P,{}),(0,b.jsxs)(o.A,{variant:"body2",sx:{my:3},children:["Don\u2019t have a code? \xa0",(0,b.jsx)(a.A,{variant:"subtitle2",children:"Resend code"})]}),(0,b.jsxs)(a.A,{component:n.N_,to:i.pi.login,color:"inherit",variant:"subtitle2",sx:{mx:"auto",alignItems:"center",display:"inline-flex"},children:[(0,b.jsx)(d.A,{icon:"eva:chevron-left-fill",width:16}),"Return to sign in"]})]})}},5321:(e,s,r)=>{r.d(s,{QX:()=>o,lM:()=>n});const t=r(29994).FH.injectEndpoints({reducerPath:"apiUser",endpoints:e=>({resetPass:e.mutation({query:e=>({url:"/auth/reset-password-request",method:"POST",body:e})}),newPass:e.mutation({query:e=>({url:"/auth/reset-password",method:"POST",body:e})})})}),{useResetPassMutation:n,useNewPassMutation:o}=t}}]);