"use strict";(self.webpackChunkadmin_plus=self.webpackChunkadmin_plus||[]).push([[1126],{78084:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(63464),i=n(40033),o=n(28170),l=n(79739),s=n(45098),a=n(44414);function c(e){let{title:t,content:n,action:c,open:d,onClose:u,...h}=e;return(0,a.jsxs)(r.A,{fullWidth:!0,maxWidth:"xs",open:d,onClose:u,...h,children:[(0,a.jsx)(i.A,{sx:{pb:2},children:t}),n&&(0,a.jsxs)(o.A,{sx:{typography:"body2"},children:[" ",n," "]}),(0,a.jsxs)(l.A,{children:[c,(0,a.jsx)(s.A,{variant:"outlined",color:"inherit",onClick:u,children:"Cancel"})]})]})}},87033:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(53011),i=n(12257),o=n(82053),l=n(52432),s=n(36080),a=n(42074),c=n(44414);function d(e){let{link:t,activeLast:n,disabled:i}=e;const{name:o,href:l,icon:d}=t,u={typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex",...i&&!n&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}},h=(0,c.jsxs)(c.Fragment,{children:[d&&(0,c.jsx)(r.A,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:d}),o]});return l?(0,c.jsx)(s.A,{component:a.N_,to:l,sx:u,children:h}):(0,c.jsxs)(r.A,{sx:u,children:[" ",h," "]})}function u(e){let{links:t,action:n,heading:a,moreLink:u,activeLast:p,sx:x,...g}=e;const m=t[t.length-1].name;return(0,c.jsxs)(r.A,{sx:{mb:5,...x},children:[(0,c.jsxs)(i.A,{direction:"row",alignItems:"center",children:[(0,c.jsxs)(r.A,{sx:{flexGrow:1},children:[a&&(0,c.jsx)(o.A,{variant:"h4",gutterBottom:!0,children:a}),!!t.length&&(0,c.jsx)(l.A,{separator:(0,c.jsx)(h,{}),...g,children:t.map((e=>(0,c.jsx)(d,{link:e,activeLast:p,disabled:e.name===m},e.name||"")))})]}),n&&(0,c.jsxs)(r.A,{sx:{flexShrink:0},children:[" ",n," "]})]}),!!u&&(0,c.jsx)(r.A,{sx:{mt:2},children:u.map((e=>(0,c.jsx)(s.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}function h(){return(0,c.jsx)(r.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},54593:(e,t,n)=>{function r(e,t,n){return e>0?Math.max(0,(1+e)*t-n):0}function i(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function o(e,t){return"desc"===e?(e,n)=>i(e,n,t):(e,n)=>-i(e,n,t)}n.d(t,{dO:()=>m,er:()=>b,Sm:()=>g,We:()=>k,Uv:()=>y,xl:()=>r,hz:()=>o,K2:()=>s});var l=n(9950);function s(e){const[t,n]=(0,l.useState)(!(null===e||void 0===e||!e.defaultDense)),[r,i]=(0,l.useState)((null===e||void 0===e?void 0:e.defaultOrderBy)||"name"),[o,s]=(0,l.useState)((null===e||void 0===e?void 0:e.defaultOrder)||"asc"),[a,c]=(0,l.useState)((null===e||void 0===e?void 0:e.defaultCurrentPage)||0),[d,u]=(0,l.useState)((null===e||void 0===e?void 0:e.defaultRowsPerPage)||5),[h,p]=(0,l.useState)((null===e||void 0===e?void 0:e.defaultSelected)||[]),x=(0,l.useCallback)((e=>{""!==e&&(s(r===e&&"asc"===o?"desc":"asc"),i(e))}),[o,r]),g=(0,l.useCallback)((e=>{const t=h.indexOf(e);let n=[];-1===t?n=n.concat(h,e):0===t?n=n.concat(h.slice(1)):t===h.length-1?n=n.concat(h.slice(0,-1)):t>0&&(n=n.concat(h.slice(0,t),h.slice(t+1))),p(n)}),[h]),m=(0,l.useCallback)(((e,t)=>{p(e?t:[])}),[]),f=(0,l.useCallback)(((e,t)=>{c(t)}),[]),v=(0,l.useCallback)((e=>{c(0),u(parseInt(e.target.value,10))}),[]),A=(0,l.useCallback)((e=>{n(e.target.checked)}),[]);return{dense:t,order:o,page:a,orderBy:r,rowsPerPage:d,selected:h,onSelectRow:g,onSelectAllRows:m,onSort:x,onChangePage:f,onChangeDense:A,onChangeRowsPerPage:v,setPage:c,setDense:n,setOrder:s,setOrderBy:i,setSelected:p,setRowsPerPage:u}}var a=n(9213),c=n(21671),d=n(12257),u=n(82053),h=n(7653),p=n(44414);function x(e){let{title:t,description:n,img:r,sx:i,...o}=e;return(0,p.jsxs)(d.A,{alignItems:"center",justifyContent:"center",sx:{height:1,textAlign:"center",p:e=>e.spacing(8,2),...i},...o,children:[(0,p.jsx)(h.A,{disabledEffect:!0,alt:"empty content",src:r||"/assets/illustrations/illustration_empty_content.svg",sx:{height:240,mb:3}}),(0,p.jsx)(u.A,{variant:"h5",gutterBottom:!0,children:t}),n&&(0,p.jsx)(u.A,{variant:"body2",sx:{color:"text.secondary"},children:n})]})}function g(e){let{isNotFound:t}=e;return(0,p.jsx)(a.A,{children:t?(0,p.jsx)(c.A,{colSpan:12,children:(0,p.jsx)(x,{title:"No Data",sx:{"& span.MuiBox-root":{height:160}}})}):(0,p.jsx)(c.A,{colSpan:12,sx:{p:0}})})}function m(e){let{emptyRows:t,height:n}=e;return t?(0,p.jsx)(a.A,{sx:{...n&&{height:n*t}},children:(0,p.jsx)(c.A,{colSpan:9})}):null}var f=n(69780),v=n(7251),A=n(53011);const j={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function b(e){let{order:t,orderBy:n,rowCount:r=0,headLabel:i,numSelected:o=0,onSort:l,onSelectAllRows:s,sx:d}=e;return(0,p.jsx)(f.A,{sx:d,children:(0,p.jsx)(a.A,{children:i.map((e=>(0,p.jsx)(c.A,{align:e.align||"left",sortDirection:n===e.id&&t,sx:{width:e.width,minWidth:e.minWidth},children:l?(0,p.jsxs)(v.A,{hideSortIcon:!0,active:n===e.id,direction:n===e.id?t:"asc",onClick:()=>l(e.id),sx:{textTransform:"capitalize"},children:[e.label,n===e.id?(0,p.jsx)(A.A,{sx:{...j},children:"desc"===t?"sorted descending":"sorted ascending"}):null]}):e.label},e.id)))})})}var w=n(93038);function y(e){let{dense:t,action:n,rowCount:r,numSelected:i,onSelectAllRows:o,sx:l,...s}=e;return i?(0,p.jsxs)(d.A,{direction:"row",alignItems:"center",sx:{pl:1,pr:2,top:0,left:0,width:1,zIndex:9,height:58,position:"absolute",bgcolor:"primary.lighter",...t&&{height:38},...l},...s,children:[(0,p.jsx)(w.A,{indeterminate:i>0&&i<r,checked:r>0&&i===r,onChange:e=>o(e.target.checked)}),(0,p.jsxs)(u.A,{variant:"subtitle1",sx:{ml:2,flexGrow:1,color:"primary.main",...t&&{ml:3}},children:[i," selected"]}),n&&n]}):null}var S=n(91434),P=n(16497),C=n(37324);function k(e){let{dense:t,onChangeDense:n,rowsPerPageOptions:r=[5,10,25],sx:i,...o}=e;return(0,p.jsxs)(A.A,{sx:{position:"relative",...i},children:[(0,p.jsx)(S.A,{rowsPerPageOptions:r,component:"div",...o}),n&&(0,p.jsx)(P.A,{label:"Dense",control:(0,p.jsx)(C.A,{checked:t,onChange:n}),sx:{pl:2,py:1.5,top:0,position:{sm:"absolute"}}})]})}},91126:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var r=n(76455),i=n(9950),o=n(28429),l=n(19808),s=n(48089),a=n(38200),c=n(84142),d=n(74745),u=n(1320),h=n(83274),p=n(25333),x=n(15769),g=n(34075),m=n(53011),f=n(82053),v=n(4753),A=n(45098),j=n(90260),b=n(39332),w=n(64071),y=n(78084),S=n(87033),P=n(3320),C=n(54593),k=n(95065),R=n(72286),_=n(22329),D=n(44414);const T=[],z=["all","activ","unActiv"],F=[{id:"ref_number",label:"Ref Number",align:"left"},{id:"nameAr",label:"nameAr ",align:"left"},{id:"start_price",label:"Start Price",align:"left"},{id:"end_price",label:"End Price",align:"left"},{id:"house_area",label:"House Area",align:"left"},{id:"bedrooms",label:"Bedrooms",align:"left"},{id:"bathrooms",label:"Bathrooms",align:"left"},{id:"",label:"",align:"left"}];function q(){var e,t;const{dense:n,page:q,order:E,orderBy:I,rowsPerPage:O,setPage:L,selected:N,setSelected:W,onSelectRow:M,onSelectAllRows:G,onSort:U,onChangeDense:H,onChangePage:Q,onChangeRowsPerPage:K}=(0,C.K2)(),{themeStretch:Z}=(0,P.Mp)(),[J,V]=((0,o.Zp)(),(0,i.useState)(!1)),[X,Y]=(0,i.useState)(""),[$,ee]=(0,i.useState)("all"),[te,ne]=(0,i.useState)("all"),[re,ie]=(0,i.useState)(1),{data:oe,isPropertiesLoading:le,refetch:se}=(0,R.zq)({onlyTrashed:"true",currentPage:re,limit:O,ref_number:X}),[ae,ce]=(0,i.useState)([]);(0,i.useEffect)((()=>{var e;oe&&!le&&ce(null===oe||void 0===oe||null===(e=oe.data)||void 0===e?void 0:e.data)}),[oe,ae,le]),(0,i.useEffect)((()=>{var e;ce(B({inputData:(null===oe||void 0===oe||null===(e=oe.data)||void 0===e?void 0:e.data)||[],comparator:(0,C.hz)(E,I),filterName:X,filterStatus:te,filterRole:$}))}),[X,oe,E,I,te,$]);const de=B({inputData:ae,comparator:(0,C.hz)(E,I),filterName:X,filterRole:$,filterStatus:te}),ue=de.slice(q*O,q*O+O),he=n?52:72,pe=""!==X||"all"!==$||"all"!==te,xe=!de.length&&!!X||!de.length&&!!$||!de.length&&!!te,ge=()=>{V(!1)},{enqueueSnackbar:me}=(0,_.dh)(),[fe]=(0,R.Ew)(),[ve]=(0,R.ae)();return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(r.mg,{children:(0,D.jsx)("title",{children:" Properties: List "})}),(0,D.jsxs)(l.A,{maxWidth:!Z&&"lg",children:[(0,D.jsx)(S.A,{heading:"Properties Archive List",links:[{name:"Dashboard",href:j.nB.root},{name:"Properties",href:j.nB.properties.list},{name:"List"}]}),(0,D.jsxs)(s.A,{children:[(0,D.jsx)(a.A,{value:te,onChange:(e,t)=>{L(0),ne(t)},sx:{px:2,bgcolor:"background.neutral"},children:T.map((e=>(0,D.jsx)(c.A,{label:e,value:e},e)))}),(0,D.jsx)(d.A,{}),(0,D.jsx)(k.h,{isFiltered:pe,filterName:X,filterRole:$,optionsRole:z,onFilterName:e=>{L(0),Y(e.target.value)},onFilterRole:e=>{L(0),ee(e.target.value)},onResetFilter:()=>{Y(""),ee("all"),ne("all")}}),(0,D.jsxs)(u.A,{sx:{position:"relative",overflow:"unset"},children:[(0,D.jsx)(C.Uv,{dense:n,numSelected:N.length,rowCount:ae.length,onSelectAllRows:e=>G(e,ae.map((e=>e.id))),action:(0,D.jsx)(h.A,{title:"Delete",children:(0,D.jsx)(p.A,{color:"primary",onClick:()=>{V(!0)},children:(0,D.jsx)(b.A,{icon:"eva:trash-2-outline"})})})}),(0,D.jsx)(w.A,{children:(0,D.jsxs)(x.A,{size:n?"small":"medium",sx:{minWidth:800},children:[(0,D.jsx)(C.er,{order:E,orderBy:I,headLabel:F,rowCount:ae.length,numSelected:N.length,onSort:U,onSelectAllRows:e=>G(e,ae.map((e=>e.id)))}),(0,D.jsxs)(g.A,{children:[de.slice(q*O,q*O+O).map((e=>(0,D.jsx)(k.k,{row:e,selected:N.includes(null===e||void 0===e?void 0:e.id),onSelectRow:()=>M(null===e||void 0===e?void 0:e.id),onDeleteRow:()=>(async e=>{const t=await fe(e);if(t&&t.error){console.error("An error occurred while deleting area:",t.error);const e=t.error.data.message||"An error occurred";me(e,{variant:"error"}),ge(),V(!1)}else{const t=null===ae||void 0===ae?void 0:ae.filter((t=>(null===t||void 0===t?void 0:t.id)!==e));W([]),ce(t),se(),ge(),V(!1),q>0&&ue.length<2&&L(q-1)}})(null===e||void 0===e?void 0:e.id),onEditRow:()=>{return t=null===e||void 0===e?void 0:e.id,void(async()=>{try{const e=await ve(t);console.log("Properties restored successfully:",e),se()}catch(e){console.error("Failed to restore properties:",e)}})();var t},txt:"Restore"},null===e||void 0===e?void 0:e.id))),(0,D.jsx)(C.dO,{height:he,emptyRows:(0,C.xl)(q,O,ae.length)}),(0,D.jsx)(C.Sm,{isNotFound:xe})]})]})})]}),(0,D.jsxs)(m.A,{sx:{display:"flex",justifyContent:"space-around",py:2,alignItems:"center"},children:[(0,D.jsx)(f.A,{fontSize:"small",children:"5 item in each page"}),(0,D.jsx)(v.A,{count:null===oe||void 0===oe||null===(e=oe.data)||void 0===e?void 0:e.last_page,shape:"rounded",page:re,showFirstButton:!0,showLastButton:!0,onChange:(e,t)=>{ie(t)}}),(0,D.jsxs)(f.A,{fontSize:"small",children:["item available ",null===oe||void 0===oe||null===(t=oe.data)||void 0===t?void 0:t.total]})]})]})]}),(0,D.jsx)(y.A,{open:J,onClose:ge,title:"Delete",content:(0,D.jsxs)(D.Fragment,{children:["Are you sure want to delete"," ",(0,D.jsxs)("strong",{children:[" ",N.length," "]})," items?"]}),action:(0,D.jsx)(A.A,{variant:"contained",color:"error",onClick:()=>{(e=>{const t=ae.filter((t=>!e.includes(t.id)));if(W([]),ce(t),q>0)if(e.length===ue.length)L(q-1);else if(e.length===de.length)L(0);else if(e.length>ue.length){const t=Math.ceil((ae.length-e.length)/O)-1;L(t)}})(N),ge()},children:"Delete"})})]})}function B(e){let{inputData:t,comparator:n,filterName:r,filterStatus:i,filterRole:o}=e;const l=t.map(((e,t)=>[e,t]));return l.sort(((e,t)=>{const r=n(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=l.map((e=>e[0])),r&&(t=t.filter((e=>-1!==e.ref_number.toLowerCase().indexOf(r.toLowerCase())))),"all"!==i&&(t=t.filter((e=>e.active===i))),"all"!==o&&(t=t.filter((e=>e.role===o))),t}},95065:(e,t,n)=>{n.d(t,{k:()=>g,h:()=>v});var r=n(9950),i=n(9213),o=n(21671),l=n(12257),s=n(82053),a=n(25333),c=n(23266),d=n(45098),u=n(39332),h=n(39635),p=n(78084),x=(n(63581),n(44414));function g(e){let{row:t,selected:n,onEditRow:g,onSelectRow:m,onDeleteRow:f,txt:v="Edit",is_available:A=!1}=e;const{name:j,agent_code:b,address:w,whatsapp:y,phone_number:S,start_price:P,end_price:C,house_area:k,ref_number:R,bedrooms:_,bathrooms:D,description:T,payment_plans_title:z,id:F}=t,[q,B]=(0,r.useState)(!1),[E,I]=(0,r.useState)(null),O=()=>{I(null)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(i.A,{hover:!0,selected:n,children:[(0,x.jsx)(o.A,{align:"left",sx:{textTransform:"capitalize"},children:"".concat(R)}),(0,x.jsx)(o.A,{align:"left",sx:{textTransform:"capitalize"},children:"".concat(b)}),(0,x.jsx)(o.A,{children:(0,x.jsx)(l.A,{direction:"row",alignItems:"center",spacing:2,children:(0,x.jsx)(s.A,{variant:"subtitle2",noWrap:!0,children:"".concat(j.en.slice(0,10),"...")})})}),(0,x.jsx)(o.A,{align:"left",sx:{textTransform:"capitalize"},children:"".concat(P)}),(0,x.jsx)(o.A,{align:"left",sx:{textTransform:"capitalize"},children:"".concat(C)}),(0,x.jsx)(o.A,{align:"left",sx:{textTransform:"capitalize"},children:"".concat(k)}),(0,x.jsx)(o.A,{align:"left",sx:{textTransform:"capitalize"},children:"".concat(_)}),(0,x.jsx)(o.A,{align:"left",sx:{textTransform:"capitalize"},children:"".concat(D)}),(0,x.jsx)(o.A,{align:"right",children:(0,x.jsx)(a.A,{color:E?"inherit":"default",onClick:e=>{I(e.currentTarget)},children:(0,x.jsx)(u.A,{icon:"eva:more-vertical-fill"})})})]}),(0,x.jsxs)(h.A,{open:E,onClose:O,arrow:"right-top",sx:{width:140},children:[(0,x.jsxs)(c.A,{onClick:()=>{B(!0),O()},sx:{color:"error.main"},children:[(0,x.jsx)(u.A,{icon:"eva:trash-2-outline"}),"Delete"]}),(0,x.jsxs)(c.A,{onClick:()=>{g(),O()},children:[(0,x.jsx)(u.A,{icon:"eva:edit-fill"}),v]}),A&&(0,x.jsxs)(c.A,{onClick:()=>{window.open("https://aqarpluseg.com/property/".concat(F),"_blank")},children:[(0,x.jsx)(u.A,{icon:"eva:eye-fill"}),"view"]})]}),(0,x.jsx)(p.A,{open:q,onClose:()=>{B(!1)},title:"Delete",content:"Are you sure want to delete?",action:(0,x.jsx)(d.A,{variant:"contained",color:"error",onClick:f,children:"Delete"})})]})}var m=n(16987),f=n(2046);function v(e){let{isFiltered:t,filterName:n,filterRole:r,optionsRole:i,onFilterName:o,onFilterRole:s,onResetFilter:a}=e;return(0,x.jsx)(l.A,{spacing:2,alignItems:"center",direction:{xs:"column",sm:"row"},sx:{px:2.5,py:3},children:(0,x.jsx)(m.A,{fullWidth:!0,value:n,onChange:o,placeholder:"Search...",InputProps:{startAdornment:(0,x.jsx)(f.A,{position:"start",children:(0,x.jsx)(u.A,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})}},63581:(e,t,n)=>{n.d(t,{ef:()=>i});const r=n(29994).FH.injectEndpoints({reducerPath:"apiUser",endpoints:e=>({getCoins:e.query({query:()=>"/coins?per_page=15",providesTags:["coins"]}),editCoins:e.mutation({query:e=>{let{formData:t,id:n}=e;return{url:"/coins/".concat(n),method:"POST",body:t}},invalidatesTags:["/coins"]})})}),{useGetCoinsQuery:i,useEditCoinsMutation:o}=r},72286:(e,t,n)=>{n.d(t,{Ew:()=>d,Iw:()=>s,W6:()=>o,ae:()=>a,fx:()=>l,zq:()=>i,zr:()=>c});const r=n(29994).FH.injectEndpoints({reducerPath:"apiUser",endpoints:e=>({getProperties:e.query({query:e=>{let{onlyTrashed:t,currentPage:n,limit:r,ref_number:i}=e;return"true"===t?"/properties?onlyTrashed=true&page=".concat(n,"&per_page=").concat(r,"&ref_number=").concat(i):"/properties?page=".concat(n,"&per_page=").concat(r,"&ref_number=").concat(i)},providesTags:["properties"]}),getPropertiesId:e.query({query:e=>"/properties/".concat(e,"?local=none"),providesTags:["properties"]}),addProperties:e.mutation({query:e=>({url:"/properties",method:"POST",body:e}),invalidatesTags:["properties"]}),editProperties:e.mutation({query:e=>{let{formData:t,id:n}=e;return{url:"/properties/".concat(n),method:"POST",body:t}},invalidatesTags:["/properties"]}),restoreProperties:e.mutation({query:t=>({url:"/properties/".concat(t,"/restore"),method:"POST",body:e}),invalidatesTags:["/properties"]}),deleteProperties:e.mutation({query:t=>({url:"/properties/".concat(t),method:"Delete",body:e}),invalidatesTags:["/properties"]}),deleteArchefProperties:e.mutation({query:t=>({url:"/properties/".concat(t,"/force-delete"),method:"Delete",body:e}),invalidatesTags:["/properties"]})})}),{useGetPropertiesQuery:i,useGetPropertiesIdQuery:o,useAddPropertiesMutation:l,useEditPropertiesMutation:s,useRestorePropertiesMutation:a,useDeletePropertiesMutation:c,useDeleteArchefPropertiesMutation:d}=r}}]);